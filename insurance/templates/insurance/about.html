{% extends 'base.html' %}
{% block title %}About the Model - Healthcare Management System{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card shadow-lg mb-4">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0"><i class="fas fa-brain"></i> About the Insurance Cost Predictor</h3>
                </div>
                <div class="card-body p-4">
                    <h5 class="mb-3">How It Works</h5>
                    <p>Our Insurance Cost Predictor uses a Machine Learning model based on Linear Regression to estimate annual health insurance costs. The model analyzes various factors that insurance companies typically consider when determining premiums.</p>

                    <h5 class="mt-4 mb-3">Features Analyzed - FIXED</h5>
                    <div class="row">
                        {% for feature, importance in feature_importance.items %}
                        <div class="col-md-6 mb-3">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <h6>{{ feature }}</h6>
                                    <div class="progress" style="height: 20px;">
                                        {% if importance > 20000 %}
                                            <div class="progress-bar bg-danger" style="width: 100%"></div>
                                        {% elif importance > 10000 %}
                                            <div class="progress-bar bg-warning" style="width: 80%"></div>
                                        {% elif importance > 5000 %}
                                            <div class="progress-bar bg-info" style="width: 60%"></div>
                                        {% elif importance > 2000 %}
                                            <div class="progress-bar bg-primary" style="width: 40%"></div>
                                        {% else %}
                                            <div class="progress-bar bg-success" style="width: 20%"></div>
                                        {% endif %}
                                    </div>
                                    <small class="text-muted">Impact Score: {{ importance|floatformat:0 }}</small>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <h5 class="mt-4 mb-3">Key Factors Explained</h5>
                    <div class="accordion" id="factorsAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#smoking">
                                    Smoking Status (Highest Impact)
                                </button>
                            </h2>
                            <div id="smoking" class="accordion-collapse collapse show">
                                <div class="accordion-body">
                                    Smoking is the strongest predictor of insurance costs. Smokers typically pay significantly higher premiums due to increased health risks.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#bmi">
                                    BMI (Body Mass Index)
                                </button>
                            </h2>
                            <div id="bmi" class="accordion-collapse collapse">
                                <div class="accordion-body">
                                    Higher BMI is associated with increased health risks and higher insurance costs. Maintaining a healthy weight can help reduce premiums.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#age">
                                    Age
                                </button>
                            </h2>
                            <div id="age" class="accordion-collapse collapse">
                                <div class="accordion-body">
                                    Insurance costs generally increase with age due to higher likelihood of health issues.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info mt-4">
                        <h6><i class="fas fa-info-circle"></i> Disclaimer</h6>
                        <p class="mb-0">This prediction is an estimate based on statistical analysis and should not be considered as an official insurance quote. Actual insurance costs may vary based on additional factors and specific insurance provider policies.</p>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
                        <a href="{% url 'insurance:predict' %}" class="btn btn-primary">
                            <i class="fas fa-calculator"></i> Try the Predictor
                        </a>
                        <a href="{% url 'users:dashboard' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-home"></i> Back to Dashboard
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}